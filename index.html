---
layout : default
title : TnT Tree
type : overview
theme : node_size
---

<h2>Visualization of trees for the web</h2>
{% include theme.html %}

<p><aside>See <a href={{ site.baseurl }}/examples/index.html>more examples</a></aside></p>

<h2><a name="introduction" href="#introduction">#</a>Introduction</h2>
<p><b>TnT Tree</b> is a javascript library for displaying trees annotations in the web. It is part of the the <a href="">TnT</a> set of visualisation libraries to display trees and track-based visualisations. It has been designed with a powerful API, written with flexibility in mind, that allows the creation of expressive, dynamic and powerful tree visualizations.</p>

<p>TnT Tree includes several elements to facilitate the creation, manipulation and configuration of trees: a <a href="{{ site.baseurl }}/api/tree/index.html#Tree_Visualization">tree display</a> that defines several properties of the visualisation including <a href="{{ site.baseurl }}/api/tree/index.html#Layout">layouts</a>, <a href="{{ site.baseurl }}/api/tree/index.html#Label">labels</a> and <a href="{{ site.baseurl }}/api/tree/index.html#Node_display">node displays</a>, a library to manipulate <a href="{{ site.baseurl }}/api/tree/index.html#Node">nodes</a> at the data level and methods to load the trees in newick or nhx format.</p>

<h3>Trees</h3>
<p>In TnT, a tree is composed of several elements: a layout that defines the shape of the tree (either <i>radial</i> or <i>vertical</i>), nodes that define how each node is rendered and labels that specify how the labels are defined in the final visualisation. Each of these elements can be configured independently and sensible default values are provided. In the final tree, new nodes can be added or removed dynamically. All the methods available to configure each element are fully explained in the <a href="{{ site.baseurl }}/api/index.html">API</a> documentation.

{% highlight javascript linenos %}
// Input tree
var newick = '((human, chimp),mouse)';

// Tree visualisation configuration
var tree = tnt.tree()
    .data(tnt.tree.parse_newick(newick))
    .layout (tnt.tree.layout.vertical()
        .width (650)
    )
    .node_display (tnt.tree.node_display.circle()
        .size(5)
        .fill(function (node) {
            if (node.is_leaf() {
                return "blue";
            })
            return "green";
        })
    )
    .label (tnt.tree.label.text()
        .height(30)
        .text (function (node) {
            return node.property("name");
        })
    );

// Tree rendering
tree (document.getElementById("divId"));
{% endhighlight %}

<p>As shown in the example above, the tree visualisation is itself a function that when executed initialises the visualisation using the provided <i>DOM element</i> as its DOM container. It is important to understand these three states of the visualisation:</p>

<ul>
  <li><b>Defined</b>: The tree instance is defined, but the visualisation hasn't been rendered and the container is still empty</li>
  <li><b>Initialised</b>: The container is populated with the tree elements</li>
</ul>


<h3>Nodes</h3>
<p>TnT Tree incorporates a library for tree manipulation (tnt.tree.node) that when used in combination with the tree visualisation offers a powerful tool for creating interactive trees. This library includes a functional interface for traversing the tree, searching nodes, applying callbacks, collapsing parts of the tree, selecting subtrees, etc. Once the tree has loaded its data, it is possible to get the root node by calling its root method. When configuring the elements of the tree (node display, branches, labels, etc...) many of the available methods accepts a tnt.tree.node as its argument allowing per-node configurations. Check the API documentation for a full list of methods available for these nodes.</p>

<h3>Input trees</h3>
<p>Trees can be loaded in TnT Tree using its data method. The format for this input tree is a nested object in which each object (node) has a <i>children</i> property set to an array of objects (children nodes in the tree). The terminal objects don't have the <i>children</i> property. This is an example of tree object:</p>

{% highlight javascript linenos %}
var jsonObj = {
    "name" : "root",
    "children" : [
        {
            "name" : "leaf1"
        },
        {
            "name" : "leaf2"
        }
    ]
};
{% endhighlight %}

<p>Because it it nos easy to define trees this way, TnT Tree offers tnt.tree.parse_newick and tnt.tree.parse_nhx, two methods that can read a newick or nhx string respectively and converts it into the structure shown above. When the input is a newick tree, the returned object has its <i>name</i> property set to the name of the node. If branch lengths are provided the <i>branch_length</i> property is used.</p>

<h2><a name="example" href="#example">#</a>Example</h2>
<p>Examples are a fundamental part of TnT documentation. Check more in the examples page</p>
{% highlight javascript linenos %}
// Input tree
var newick = '((human, chimp),mouse)';

// Tree visualisation configuration
var tree = tnt.tree()
    .data(tnt.tree.parse_newick(newick))
    .layout (tnt.tree.layout.vertical()
        .width (650)
    )
    .node_display (tnt.tree.node_display.circle()
        .size(5)
        .fill(function (node) {
            if (node.is_leaf() {
                return "blue";
            })
            return "green";
        })
    )
    .label (tnt.tree.label.text()
        .height(30)
        .text (function (node) {
            return node.property("name");
        })
    );

// Tree rendering
tree (document.getElementById("divId"));
{% endhighlight %}

<p>The above example starts by creating a new tree object from a newick string. It then creates a new tree visualisation passing the tree object as its data. The layout of the tree, the nodes aspect and the labels for the tree are also configured. Once the tree is configure, the tree visualisation is rendered using the <i>div</i> element element passed as its argument.</p>


<h2><a name="installation" href="#installation">#</a>Installation</h2>
<p>TnT Tree can be linked directly from the github repo. It depends on the <a href="http://d3js.org">d3js</a> and this library needs to be linked before tnt.tree</p>

{% highlight html linenos %}
<link rel="stylesheet" href="http://emepyc.github.io/tnt/build/tnt.tree.css" type="text/css" />
<script src="http://d3js.org/d3.v3.min.js" charset="utf-8"></script>
<script src="http://emepyc.github.io/tnt/build/tnt.tree.min.js" charset="utf-8"></script>
{% endhighlight %}

<p>It is also possible to install the source code and build the library locally. This can be achieved either by using <b>npm</b> or <b>github</b>:</p>

<ul>
    <li>
        Using <b>npm</b>:
        {% highlight bash %}
npm install tnt.tree
        {% endhighlight %}
    </li>
    <li>
        Building from <b>Git</b>:
        {% highlight bash %}
git clone https://github.com/emepyc/tnt.tree
cd tnt.tree
npm install
npm build-browser
        {% endhighlight %}
    </li>
</ul>


<h2><a name="usage" href="#usage">#</a>Usage</h2>

<p><aside>Check out the <a href={{ site.baseurl }}/api/index.html>API</a></aside></p>

<p>Once the library has been installed and built, it can be used directly:</p>

{% highlight html linenos %}
<link rel="stylesheet" href="build/tnt.tree.css" type="text/css" />
<script src="http://d3js.org/d3.v3.min.js" charset="utf-8"></script>
<script src="build/tnt.min.js" charset="utf-8"></script>
{% endhighlight %}


<h2><a name="dependencies" href="#dependencies">#</a>Dependencies</h2>
<p>TnT Tree has been built on top of the excellent d3js library, being this its only dependency. Experience with d3js is only needed to develop extensions (like new visual features). D3js is not included in the library and has to be included in your web page <i>before</i> including TnT Tree</p>

<h2><a name="browsers" href="#browsers">#</a>Browser support</h2>
<p>TnT works on HTML5, CSS3 and SVG-compliant browser, which generally means any "modern browser". The TnT library and themes are tested regularly against Chrome (Chromium) and major changes are regularly tested in recent versions of Firefox, Safari (Webkit) and Opera. It has been also tested in IE versions 9+. If you find any problem, please <a href="https://github.com/emepyc/tnt/issues">let me know</a>.</p>

<p>The TnT library depends only on the <a href="http://d3js.org">D3.js</a> library. Check its <a href="https://github.com/mbostock/d3/wiki#browser-support">browser's compatibility note</a> for more information.</p>
